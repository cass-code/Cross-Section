# theme(legend.position = "none") +
xlab("Race") +
ylab("Income") +
ggtitle("Plot of Income and Race")
g
g <-
ggplot(data = dfplot,aes(x = race, y = income, color=race)) +
geom_histogram() +
stat_smooth(method = "lm",
col = "#000000",
se = FALSE,
size = 1) +
theme_minimal()+
# theme(legend.position = "none") +
xlab("Race") +
ylab("Income") +
ggtitle("Plot of Income and Race")
g
g <-
ggplot(data = dfplot,aes(x = income, color=race)) +
geom_histogram() +
stat_smooth(method = "lm",
col = "#000000",
se = FALSE,
size = 1) +
theme_minimal()+
# theme(legend.position = "none") +
xlab("Race") +
ylab("Income") +
ggtitle("Plot of Income and Race")
g
g <-
ggplot(data = dfplot,aes(x = income, color=race)) +
geom_histogram() +
theme_minimal()+
# theme(legend.position = "none") +
xlab("Race") +
ylab("Income") +
ggtitle("Plot of Income and Race")
g
g <-
ggplot(data = dfplot,aes(x = log(income), colour=income)) +
geom_histogram() +
theme_minimal()+
# theme(legend.position = "none") +
xlab("Race") +
ylab("Income") +
ggtitle("Plot of Income and Race")
g
g <-
ggplot(data = dfplot,aes(x = log(income), fill=income)) +
geom_histogram() +
theme_minimal()+
# theme(legend.position = "none") +
xlab("Race") +
ylab("Income") +
ggtitle("Plot of Income and Race")
g
g <-
ggplot(data = dfplot,aes(x = log(income), fill=income)) +
geom_histogram() +
theme_minimal()+
# theme(legend.position = "none") +
xlab("Log Income") +
ylab("") +
ggtitle("Distribution of Log of Income")
g
g <-
ggplot(data = dfplot,aes(x = log(income), colour=income)) +
geom_histogram() +
theme_minimal()+
# theme(legend.position = "none") +
xlab("Log Income") +
ylab("") +
ggtitle("Distribution of Log of Income")
g
g <-
ggplot(data = dfplot,aes(x = log(income), color=income)) +
geom_histogram() +
theme_minimal()+
# theme(legend.position = "none") +
xlab("Log Income") +
ylab("") +
ggtitle("Distribution of Log of Income")
g
g <-
ggplot(data = dfplot,aes(x = log(income), color=race)) +
geom_histogram() +
theme_minimal()+
# theme(legend.position = "none") +
xlab("Log Income") +
ylab("") +
ggtitle("Distribution of Log of Income")
g
g <-
ggplot(data = dfplot,aes(x = log(income), color=education)) +
geom_histogram() +
theme_minimal()+
# theme(legend.position = "none") +
xlab("Log Income") +
ylab("") +
ggtitle("Distribution of Log of Income")
g
g <-
ggplot(data = dfplot,aes(x = log(income), color="#123456")) +
geom_histogram() +
theme_minimal()+
# theme(legend.position = "none") +
xlab("Log Income") +
ylab("") +
ggtitle("Distribution of Log of Income")
g
g <-
ggplot(data = dfplot,aes(x = log(income), fill="#123456")) +
geom_histogram() +
theme_minimal()+
# theme(legend.position = "none") +
xlab("Log Income") +
ylab("") +
ggtitle("Distribution of Log of Income")
g
ggplot(data = dfplot,aes(x = log(income)) +
geom_histogram(color="darkblue", fill="lightblue")
g <-
ggplot(data = dfplot,aes(x = log(income)) +
geom_histogram(color="darkblue", fill="lightblue") +
g <-
g <-
ggplot(data = dfplot) +
geom_histogram(,aes(x = log(income), color="darkblue", fill="lightblue")) +
xlab("Log Income") +
ylab("") +
ggtitle("Distribution of Log of Income") +
theme_minimal()
g
g <-
ggplot(data = dfplot) +
geom_histogram(,aes(x = log(income), color="darkblue", fill="lightblue")) +
xlab("Log Income") +
ylab("") +
ggtitle("Distribution of Log of Income") +
g
g <-
ggplot(data = dfplot) +
geom_histogram(aes(x = log(income), color="darkblue", fill="lightblue")) +
xlab("Log Income") +
ylab("") +
ggtitle("Distribution of Log of Income") +
g
g <-
ggplot(data = dfplot) +
geom_histogram(aes(x = log(income), color="darkblue", fill="lightblue")) +
xlab("Log Income") +
ylab("") +
ggtitle("Distribution of Log of Income") +
theme_minimal()
g
g <-
ggplot(data = dfplot) +
geom_histogram(aes(x = log(income), fill="lightblue")) +
xlab("Log Income") +
ylab("") +
ggtitle("Distribution of Log of Income") +
theme_minimal()
g
geom_histogram(color="blue", fill="lightblue") +
ggplot(data = dfplot, aes(x = log(income)) +
g <-
g <-
ggplot(data = dfplot, aes(x = log(income))) +
geom_histogram(color="blue", fill="lightblue") +
xlab("Log Income") +
ylab("") +
ggtitle("Distribution of Log of Income") +
theme_minimal()
g
g <-
ggplot(data = dfplot, aes(x = log(income))) +
geom_histogram(color="blue", fill="lightblue") +
xlab("Log Income") +
ylab("") +
ggtitle("Distribution of Log of Income") +
g
ggplot(dfplot, aes(x=log(income), fill=income)) +
geom_histogram(fill="white", color="black")+
labs(title="Weight histogram plot",x="Income", y = "")+
theme_classic()
ggplot(dfplot, aes(x=log(income), fill=income)) +
geom_histogram(fill="black", color="black")+
labs(title="Weight histogram plot",x="Log of Income", y = "")+
theme_minimal()
ggplot(dfplot, aes(x=log(income), fill=income)) +
geom_histogram()+
labs(title="Weight histogram plot",x="Log of Income", y = "")+
theme_minimal()
ggplot(dfplot, aes(x=log(income), color=income)) +
geom_histogram()+
labs(title="Weight histogram plot",x="Log of Income", y = "")+
theme_minimal()
ggplot(dfplot, aes(x=log(income), fill=income)) +
geom_histogram(fill="#F8766D", color="#F8766D")+
labs(title="Weight histogram plot",x="Log of Income", y = "")+
theme_minimal()
g<-
ggplot(dfplot, aes(x=log(income), fill=income)) +
geom_histogram(fill="#F8766D", color="#F8766D")+
labs(title="Distribution of Log of Income",x="Log of Income", y = "")+
theme_minimal()
g
g <- ggplot(dfplot) +
geom_bar(aes(x = race, stat="identity", width=0.7, fill = race)) +
theme_minimal() +
xlab("Race") +
ylab("People") +
ggtitle("Race Proportions")
g
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE, fig.width = 6, fig.height = 5, fig.pos="H", fig.pos = 'H')
if(!require("tidyverse")) install.packages("tidyverse")
library(tidyverse)
library(haven)
library(ivreg)
library(ggplot2)
#read in nids
data <- read_dta("data/Adult_W5_Anon_V1.0.0.dta")
d1 <- iv_father(data)
d2 <- iv_mother(data)
d3 <- f_occ(data)
d4 <- m_occ(data)
lm1 <-lm(education ~ father_ed, d1)
lm1 <-lm(education ~ father_ed, d1)
lm1 <-lm(education ~ mother_ed, d2)
lm1 <-lm(education ~ father_occ, d3)
lm1 <-lm(education ~ mother_occ, d4)
htab <-
huxreg("Father's Education" = lm1, "Mother's Education" = lm2, "Father's Occupation" = lm3, "Mother's Occupation" = lm4,
coefs = c("Father's Education" = "father_ed", "Mother's Education" = "mother_ed", "Father's Occupation" = "father_occ", "Mother's Occupation" = "mother_occ"),
statistics = c(N = "nobs", R2 = "r.squared"),
note = "%stars%.") %>%
set_caption(Title) %>%
set_label(Label)
Title <- "Regressions: Instrument Relevance"
Label <- "reg2"
htab <-
huxreg("Father's Education" = lm1, "Mother's Education" = lm2, "Father's Occupation" = lm3, "Mother's Occupation" = lm4,
coefs = c("Father's Education" = "father_ed", "Mother's Education" = "mother_ed", "Father's Occupation" = "father_occ", "Mother's Occupation" = "mother_occ"),
statistics = c(N = "nobs", R2 = "r.squared"),
note = "%stars%.") %>%
set_caption(Title) %>%
set_label(Label)
library(huxtable)
Title <- "Regressions: Instrument Relevance"
Label <- "reg2"
htab <-
huxreg("Father's Education" = lm1, "Mother's Education" = lm2, "Father's Occupation" = lm3, "Mother's Occupation" = lm4,
coefs = c("Father's Education" = "father_ed", "Mother's Education" = "mother_ed", "Father's Occupation" = "father_occ", "Mother's Occupation" = "mother_occ"),
statistics = c(N = "nobs", R2 = "r.squared"),
note = "%stars%.") %>%
set_caption(Title) %>%
set_label(Label)
lm1 <-lm(education ~ father_ed, d1)
lm2 <-lm(education ~ mother_ed, d2)
lm3 <-lm(education ~ father_occ, d3)
lm4 <-lm(education ~ mother_occ, d4)
library(huxtable)
Title <- "Regressions: Instrument Relevance"
Label <- "reg2"
htab <-
huxreg("Father's Education" = lm1, "Mother's Education" = lm2, "Father's Occupation" = lm3, "Mother's Occupation" = lm4,
coefs = c("Father's Education" = "father_ed", "Mother's Education" = "mother_ed", "Father's Occupation" = "father_occ", "Mother's Occupation" = "mother_occ"),
statistics = c(N = "nobs", R2 = "r.squared"),
note = "%stars%.") %>%
set_caption(Title) %>%
set_label(Label)
View(d3)
lm3 <-lm(education ~ father_occ, d3)
lm4 <-lm(education ~ mother_occ, d4)
results(lm4)
summary(lm4)
summary(lm3)
summary(lm2)
summary(lm1)
htab <-
huxreg("Father's Education" = lm1, "Mother's Education" = lm2, "Father's Occupation" = lm3, "Mother's Occupation" = lm4,
statistics = c(N = "nobs", R2 = "r.squared"),
note = "%stars%.") %>%
set_caption(Title) %>%
set_label(Label)
htab <-
huxreg("Father's Education" = lm1, "Mother's Education" = lm2, "Father's Occupation" = lm3, "Mother's Occupation" = lm4,
statistics = c(N = "nobs", R2 = "r.squared"),
note = "%stars%.") %>%
set_caption(Title) %>%
set_label(Label)
font_size(htab) <- 12
htab
htab1 <-'
htab1 <-
huxreg("Father's Occupation" = lm3, "Mother's Occupation" = lm4,
htab1 <-
huxreg("Father's Occupation" = lm3, "Mother's Occupation" = lm4,
coefs = c("Father's Occupation" = "father_occ", "Mother's Occupation" = "mother_occ"),
statistics = c(N = "nobs", R2 = "r.squared"),
note = "%stars%.") %>%
set_caption(Title) %>%
set_label(Label)
htab1 <-
huxreg("Father's Occupation" = lm3, "Mother's Occupation" = lm4,
statistics = c(N = "nobs", R2 = "r.squared"),
note = "%stars%.") %>%
set_caption(Title) %>%
set_label(Label)
htab1
htab
View(lm4)
View(lm3)
summary(lm4$effects)
summary(lm4$coefficients)
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE, fig.width = 6, fig.height = 5, fig.pos="H", fig.pos = 'H')
if(!require("tidyverse")) install.packages("tidyverse")
library(tidyverse)
library(haven)
library(ivreg)
library(ggplot2)
#read in nids
data <- read_dta("data/Adult_W5_Anon_V1.0.0.dta")
lm4$fstatistic
lm4$fstatistic[1]
list.files('code/', full.names = T, recursive = T) %>% as.list() %>% walk(~source(.))
d4 <- m_occ(data)
lm4 <-lm(education ~ mother_occ, d4)
lm4$fstatistic[1]
lm4$fstatistic[[1]]
lm4$fstatistic
lm4 <-lm(education ~ mother_occ, d4)
View(lm)
View(lm4)
lm4 <-lm(education ~ mother_occ, d4)
lm3 <-lm(education ~ father_occ, d3)
print(lm3)
lm3
lm3 <-lm(education ~ father_ed+ father_occ, d3)
lm4 <-lm(education ~ mother_ed + mother_occ, d4)
lm3
lm3 <-lm(education ~ father_occ, d3)
lm4 <-lm(education ~ mother_occ, d4)
lm3
summary(lm3)
summary(lm3)$F-statistic
m <- summary(lm3)
View(m)
pf(m3$fstatistic[1],m3$fstatistic[2],m3$fstatistic[3],lower.tail=FALSE)
m3 <- summary(lm3)
pf(m3$fstatistic[1],m3$fstatistic[2],m3$fstatistic[3],lower.tail=FALSE)
F4 <- pf(m4$fstatistic[1],m4$fstatistic[2],m4$fstatistic[3],lower.tail=FALSE)
m4 <- summary(lm4)
F4 <- pf(m4$fstatistic[1],m4$fstatistic[2],m4$fstatistic[3],lower.tail=FALSE)
Fstats <- data.frame("Regression" = c("Father's Occupation", "Mother's Occupation"), "p-value of F statistic" = c(F3, F4))
F3 <- pf(m3$fstatistic[1],m3$fstatistic[2],m3$fstatistic[3],lower.tail=FALSE)
F4 <- pf(m4$fstatistic[1],m4$fstatistic[2],m4$fstatistic[3],lower.tail=FALSE)
Fstats <- data.frame("Regression" = c("Father's Occupation", "Mother's Occupation"), "p-value of F statistic" = c(F3, F4))
View(Fstats)
Fstats <- data.frame("Regression" = c("Father's Occupation", "Mother's Occupation"), "p-value" = c(F3, F4))
View(Fstats)
Fstats <- data.frame("Regression" = c("Father's Occupation", "Mother's Occupation"), "p-value" = round(c(F3, F4)),2)
View(Fstats)
F3 <- pf(m3$fstatistic[1],m3$fstatistic[2],m3$fstatistic[3],lower.tail=FALSE) %>% round(.,2)
Fstats <- data.frame("Regression" = c("Father's Occupation", "Mother's Occupation"), "p-value" = c(F3, F4))
knitr::kable(Fstats, caption = "p-values of F statistics")
tab <- kable(Fstats, caption = "p-values of F statistics")
library(kableExtra)
library(kableExtra)
tab <- kable(Fstats, caption = "p-values of F statistics")
kable(Fstats, caption = "p-values of F statistics")
tab
Fstats <- data.frame("Regression" = c("Father's Occupation", "Mother's Occupation"), "p-value" = c(F3, F4)) %>% tibble::as_tibble()
library(kableExtra)
tab <-
kable(Fstats, caption = "p-values of F statistics")
tab
F3 <- pf(m3$fstatistic[1],m3$fstatistic[2],m3$fstatistic[3],lower.tail=FALSE)
F4 <- pf(m4$fstatistic[1],m4$fstatistic[2],m4$fstatistic[3],lower.tail=FALSE)
Fstats <- data.frame("Regression" = c("Father's Occupation", "Mother's Occupation"), "p-value" = c(F3, F4)) %>% tibble::as_tibble()
library(kableExtra)
tab <-
kable(Fstats, caption = "p-values of F statistics")
tab
F3 <- pf(m3$fstatistic[1],m3$fstatistic[2],m3$fstatistic[3],lower.tail=FALSE)
F4 <- pf(m4$fstatistic[1],m4$fstatistic[2],m4$fstatistic[3],lower.tail=FALSE)
F3
F4
Fstats <- data.frame("Regression" = c("Father's Occupation", "Mother's Occupation"), "p-value" = c("4.748773e-54", "2.356427e-61")) %>% tibble::as_tibble()
library(kableExtra)
tab <-
kable(Fstats, caption = "p-values of F statistics")
tab
library(modelsummary)
list <- list(OLS = lm1, IV1 = iv1, IV2=iv2, IV3 = iv3, IV4 = iv4)
library(modelsummary)
modelplot(list)
lm1 <-lm(income ~ age+ age2+ education + race + gender, d1)
lm1 <-lm(income ~ age+ age2+ education + race + gender, d1)
iv1 <- ivreg(income ~ age + age2 + race + gender| education | father_ed, data = d1)
iv2 <- ivreg(income ~ age + age2 + race + gender| education | mother_ed, data = d2)
iv2 <- ivreg(income ~ age + age2 + race + gender| education | mother_ed, data = d2)
iv3 <- ivreg(income ~ age + age2 + race + gender| education | father_occ, data = d3)
iv4 <- ivreg(income ~ age + age2 + race + gender| education | mother_occ, data = d4)
library(modelsummary)
list <- list(OLS = lm1, IV1 = iv1, IV2=iv2, IV3 = iv3, IV4 = iv4)
modelplot(list)
modelplot(list, coef_omit = "Intercept")
model_plot <- modelplot(list, coef_omit = "Intercept", coefs = c("Age" = "age", "Age2" = "age2", "Education" = "education", "Coloured" = "raceColoured", "Asian/Indian" = "raceAsian/Indian", "White" = "raceWhite", "Male" = "genderMale" ))
modelplot(list, coef_omit = "Intercept", coefs = c("Age" = "age", "Age2" = "age2", "Education" = "education", "Coloured" = "raceColoured", "Asian/Indian" = "raceAsian/Indian", "White" = "raceWhite", "Male" = "genderMale" ))
modelplot(list, coef_omit = "Intercept", coef_rename = ("Age" = "age", "Age2" = "age2", "Education" = "education", "Coloured" = "raceColoured", "Asian/Indian" = "raceAsian/Indian", "White" = "raceWhite", "Male" = "genderMale" ))
modelplot(list, coef_omit = "Intercept", coef_rename = ("Age" = "age"))
modelplot(list, coef_omit = "Intercept", coef_rename = ("Age", "age"))
modelplot(list, coef_omit = "Intercept", coef_rename = ("Age", age))
modelplot(list, coef_omit = "Intercept")
title <- "Plot of Coefficients with 95% Confidence Intervals"
label <- "plot"
list <- list(OLS = lm1, IV1 = iv1, IV2=iv2, IV3 = iv3, IV4 = iv4)
model_plot <-
modelplot(list, coef_omit = "Intercept") %>%
set_caption(title) %>%
set_label(label)
library(huxtable)
model_plot <-
modelplot(list, coef_omit = "Intercept") %>%
set_caption(title) %>%
set_label(label)
model_plot <-
modelplot(list, coef_omit = "Intercept")
model_plot
iv1 <- ivreg(income ~ age + age2 + race + gender| education | father_ed, data = d1)
iv1 <- ivreg(income ~ age + age2 + race + gender| education | father_ed, data = d1)
iv1 <- ivreg(income ~ age + age2 + race + gender| education | father_ed, data = d1)
iv2 <- ivreg(income ~ age + age2 + race + gender| education | mother_ed, data = d2)
iv3 <- ivreg(income ~ age + age2 + race + gender| education | father_occ, data = d3)
iv4 <- ivreg(income ~ age + age2 + race + gender| education | mother_occ, data = d4)
iv2 <- ivreg(income ~ age + age2 + race + gender| education | mother_ed, data = d2)
iv3 <- ivreg(income ~ age + age2 + race + gender| education | father_occ, data = d3)
iv4 <- ivreg(income ~ age + age2 + race + gender| education | mother_occ, data = d4)
```
summary(iv1)
View(iv2)
summary(iv1, vcov = sandwich, diagnostics = TRUE)
library(sandwich)
summary(iv1, vcov = sandwich, diagnostics = TRUE)
tab1 <- summary(iv1, vcov = sandwich, diagnostics = TRUE)
library(kableExtra)
tab1 <- summary(iv1, vcov = sandwich, diagnostics = TRUE)
kable(tab1)
tab1 <- summary(iv1, vcov = sandwich, diagnostics = TRUE) %>% as.data.frame()
tab1 <- summary(iv1, vcov = sandwich, diagnostics = TRUE)
View(tab1)
kable(tab1$diagnostics)
tab2 <- summary(iv2, vcov = sandwich, diagnostics = TRUE)
kab1<- kable(tab1$diagnostics, tab2$diagnostics)
kab2 <- kable(tab2$diagnostics)
tab1 <- summary(iv1, vcov = sandwich, diagnostics = TRUE)
kab1<- kable(tab1$diagnostics, caption = "Specification Tests for Father's Education \\label{FE}")
tab2 <- summary(iv2, vcov = sandwich, diagnostics = TRUE)
kab2 <- kable(tab2$diagnostics, caption = "Specification Tests for Mother's Education \\label{ME}")
tab3 <- summary(iv3, vcov = sandwich, diagnostics = TRUE)
kab3<- kable(tab3$diagnostics, caption = "Specification Tests for Father's Occupation \\label{FO}")
tab4 <- summary(iv4, vcov = sandwich, diagnostics = TRUE)
kab4 <- kable(tab4$diagnostics, caption = "Specification Tests for Mother's Occupation \\label{MO}")
t1 <- head(tab1)[1:3]
t2 <- head(tab2)[4:6]
t3 <- head(tab1)[1:3]
t4 <- head(tab2)[4:6]
k1 <- kable(list(t1, t2))
k2 <- kable(list(t1, t2))
View(t1)
knitr::kable(
list(tab1, tab2),
caption = 'Two tables placed side by side.',
booktabs = TRUE, valign = 't'
)
knitr::kable(
list(tab1$diagnostics, tab2$diagnostics),
caption = 'Two tables placed side by side.',
booktabs = TRUE, valign = 't'
)
kable(
list(tab1$diagnostics, tab2$diagnostics),
caption = 'Two tables placed side by side.',
booktabs = TRUE, valign = 't'
)
a <- kable(
list(tab1$diagnostics, tab2$diagnostics),
caption = 'Two tables placed side by side.',
booktabs = TRUE, valign = 't'
)
a
a <- kable(
list(tab1$diagnostics, tab2$diagnostics),
caption = "Specification Tests for Father's and Mother's Education",
booktabs = TRUE, valign = 't'
)
a
b <- kable(
list(tab2$diagnostics, tab3$diagnostics),
caption = "Specification Tests for Father's and Mother's Occupation",
booktabs = TRUE, valign = 't'
)
b
a <- kable(
list(tab1$diagnostics, tab2$diagnostics, tab3$diagnostics, tab4$diagnostics),
caption = "Specification Tests for Father's and Mother's Education and Occupation \\label{spec1}",
booktabs = TRUE, valign = 't'
)
a
